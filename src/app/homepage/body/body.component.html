<div fxLayout="column" fxLayoutAlign="space-evenly center" *ngIf="!paymentOk && !paymentKo">
	<!--        
	<scandit-sdk-barcode-picker
		[scanSettings]="settings"
		(scan)="onScan($event)"
		(error)="onError($event)"
		></scandit-sdk-barcode-picker>
	-->
	<scandit-barcode-picker class="wrapped" *ngIf="scanning" (scan)="scanComplete($event)"
		configure.licenseKey="AWvAvgFWICbOHM7G6AAjOZo2+u5sIIwqzxYg49lSraD+U3qVfFLV3t9+xQ+6Q8ueJUABm91oQ1UhZyqSuFjYlwh9FiJvSlosClW3Qc10EiR0eaHhZ3d5OVdOFxvXYZTM+U9EElhJNwq1U/ChME5+JnYnZg8kBAS4OgR7nYoyqsRr7FygfDif2Okfu1xxx5Y4oV1kq7gB5VjZENMBBYLxuv1PSYU+MTwBxbgqsfpcqBipjtFj/4Z3vmzTVyuySkqdnvpFsDGU1rWLwKAcRd3AiIPpI7+1qjQDHbHC7UtpHmYQ2IDFWaL0GXFctu8Qq0M/UWvN0yOPJWhemEG5Xwj308sFq8L3QRCrpV6ssKPLV8ZFj9jhmg3S//0AynhQC5SeWfj0RW/zyygh1p9/1SqakEUKYarwYPN44yCFjogotM/j+feOJ35FS7mEEq3e1hhrthvCpcPSgirVnEv3hsoMwRUA30iU6uX5qWv4c7ODHpMuGcaGOCv6zd9Xr+M9asMOUGRMpM+bcoTrdGOY98JvMrmyA+Vrc+6DSmssJQVdxammHDwyHnWNxyHj81I4hXGud/TJoFz2lg5KiReCPXl9YKctM0PJu06OfbQQAyHPDvNthCZOIC8kF/besif+654y6PqJ0pifsuWdfKlI99SbZpjmIDhMp1w845QDVkK2S/JTjiLvQE1pKqHiRtrzLf3DR0/c2GtMvkZximVkYNE0sS+gl04XYz+xCI5tv7lkV6XmBL1GMDAOEdKqsVx9P8SR6zZ3oTH65+gCyEWfmHRyzBwiYUurDdXgz64bN2AWB4Sd4ARlx4SWs6y95d4adNHROtvT8rbR/oQrP9kiXMiC9Q=="
		configure.engineLocation="https://cdn.jsdelivr.net/npm/scandit-sdk@5.x/build/" playSoundOnScan="true"
		vibrateOnScan="true" scanSettings.enabledSymbologies='["code39"]'></scandit-barcode-picker>
	

	<div class="wrapped" *ngIf="!scanning">
		<mat-form-field appearance="outline" class="no-wrapper" fxFlex="89">
			<mat-label>Codice Fiscale</mat-label>
			<input matInput placeholder="Codice Fiscale" [(ngModel)]="cf" [disabled]="validation">
		</mat-form-field>
		<div fxFlex="1"></div>
		<button mat-stroked-button color="warn" fxFlex="10"
			(click)="activateScanner()">
			<mat-icon aria-label="Scansiona">qr_code_scanner</mat-icon>
		</button>
	</div>

	<div class="wrapped" >
		<mat-form-field appearance="outline" class="no-wrapper" fxFlex="50">
			<mat-label>Importo</mat-label>
			<input type="number" matInput #amountInput placeholder="Importo" [(ngModel)]="amount" [disabled]="validation">
		</mat-form-field>
		<div fxFlex="1"></div>
		<button *ngIf="isReady()" class="next" mat-raised-button color="primary" fxFlex="49" (click)="proceedToValidation()">Avanti</button>
	</div>

	<div class="wrapped" *ngIf="validation" fxLayoutAlign="space-evenly center">
		<p>Rivolgere il dispositivo al cittadino, in modo che inserisca il pin.</p>
	</div>
	<div class="wrapped" *ngIf="validation" fxLayoutAlign="space-evenly center">
		<h1>Stai pagando:</h1>
		<h1>{{ amount | currency: 'EUR' }}</h1>
	</div>
	<div class="wrapped" *ngIf="validation">
		<mat-form-field appearance="outline" class="no-wrapper" fxFlex="50">
			<mat-label>PIN</mat-label>
			<input type="number" matInput #pinInput placeholder="PIN" [(ngModel)]="pin" [disabled]="paymentInProgress">
		</mat-form-field>
		<div fxFlex="1"></div>
		<button *ngIf="(pin !== undefined && pin > 99999) && !paymentInProgress" class="next" mat-raised-button color="primary" fxFlex="49" (click)="proceedToPayment()">PAGA</button>
	</div>

	<div class="wrapped" fxLayout="column" fxLayoutAlign="center center" *ngIf="paymentInProgress">
		<h1>Pagamento in corso</h1>
		<h2>NON CHIUDERE LA PAGINA</h2>
		<mat-progress-spinner mode="indeterminate" diameter='100' strokeWidth='10'></mat-progress-spinner>
		<pre>{{ res | json }}</pre>
	</div>
</div>

<div fxLayout="column" fxLayoutAlign="space-evenly center" *ngIf="paymentOk || paymentKo">
	
	<div class="wrapped" fxLayout="column" fxLayoutAlign="center center" *ngIf="paymentOk">
		<h1 style="color:green">Pagamento di {{ amount | currency: 'EUR' }} completato!</h1>

		<button mat-raised-button fxFlex="50" (click)="reload()">Nuova transazione</button>
	</div>

	<div class="wrapped" fxLayout="column" fxLayoutAlign="center center" *ngIf="paymentKo">
		<h1 style="color:red">Problemi nel pagamento!!!</h1>
		<h2>Non Ã¨ stato scalato alcun importo</h2>
		<button mat-raised-button fxFlex="50" (click)="reload()">Nuova transazione</button>
		<hr>
		<pre>{{ res | json }}</pre>
	</div>

</div>